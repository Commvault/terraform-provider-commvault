---
page_title: " Commvault : commvault_storage_cloud_s3 Resource"
subcategory: "Storage"
description: |-
  Use the commvault_storage_cloud_s3 resource type to create or delete Amazon S3 storage in the CommCell environment.
---

# commvault_storage_cloud_s3 (Resource)

Use the commvault_storage_cloud_s3 resource type to create or delete Amazon S3 storage in the CommCell environment.

## Example Usage

**Configure Amazon S3 storage (Access and Secret keys) with required fields**
```hcl
data "commvault_client"  "media_agent2" {
  name = "MA1"
}

resource "commvault_storage_cloud_s3"  "storage_cloud_s3-1" {
    name = "SP32-Test-Terraform-cloud-s3-Storage-AccessSecret"
    mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    servicehost = "s3.ap-south-1.amazonaws.com"
    authentication = "Access and secret keys"
    credentials {
      id = data.commvault_credential.awscred.id
    }
    bucket = "terraform-test1-bucket-mumbai"
    storageclass = "Standard"
}
```


**Configure Amazon S3 storage (Access and Secret keys) with custom fields**
```hcl
data "commvault_client"  "media_agent2" {
  name = "bdcsrvtest05"
}

data "commvault_credential" "awscred" {
  name = "Sheza-Terraform-AWS"
}

data "commvault_client"  "media_agent2" {
  name = "bdcsrvtest05"
}

data "commvault_role" "role2" {
  name = "Alert Owner"
}

data "commvault_user" "user1" {
  name = "testui"
}

data "commvault_usergroup" "usergroup1" {
  name = "{Testing Issue}"
}

resource "commvault_storage_cloud_s3"  "storage_cloud_s3-2" {
    name = "SP32-Test-Terraform-cloud-s3-Storage-AccessSecret-Custom"
    mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    servicehost = "s3.ap-south-1.amazonaws.com"
    authentication = "Access and secret keys"
    credentials {
      id = data.commvault_credential.awscred.id
    }
    bucket = "terraform-test1-bucket-mumbai"
    storageclass = "Standard"
    usededuplication = "true"
    deduplicationdblocation {
      path = "E:\\TerraformBackuploc"
      mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    }
    security {
      role {
        id = data.commvault_role.role2.id
      }
      usergroup {
        id = data.commvault_usergroup.usergroup1.id
      }
    }
    encryption {
      cipher = "BlowFish"
      keylength = 256
      encrypt = "true"
      keyprovider {
        id = 1
        name = "Built-in"
      }
    }   
}
```
**Configure Amazon S3 storage (IAM Role) with required fields**
```hcl
data "commvault_client"  "media_agent1" {
  name = "amazon-ec2-i-0c107eccb94c550e7"
}

resource "commvault_storage_cloud_s3"  "storage_cloud_s3-3" {
    name = "SP32-Test-Terraform-cloud-s3-Storage-IAM-Role"
    mediaagent {
        id = data.commvault_client.media_agent1.id
      }
    servicehost = "s3.ap-south-1.amazonaws.com"
    authentication = "AWS IAM role policy"
    bucket = "terraform-test1-bucket-mumbai"
    storageclass = "Standard"
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `authentication` (String) Authentication type for the cloud storage server [Access and secret keys, AWS IAM role policy, AWS STS assume role, AWS STS assume role with IAM role policy]
- `bucket` (String) Name of bucket
- `mediaagent` (Block List, Min: 1) (see [below for nested schema](#nestedblock--mediaagent))
- `name` (String) Name of the cloud storage library
- `servicehost` (String) IP address or fully qualified domain name or URL for the cloud library based on cloud vendor
- `storageclass` (String) Appropriate storage class for your account [Standard, Reduced Redundancy Storage, Standard - Infrequent access, One zone - Infrequent access, Intelligent tiering, S3 Glacier, Standard/Glacier (Combined Storage Tiers), Standard-IA/Glacier (Combined Storage Tiers), One Zone-IA/Glacier (Combined Storage Tiers), Intelligent-Tiering/Glacier (Combined Storage Tiers), S3 Glacier Deep Archive, Standard/Deep Archive (Combined Storage Tiers), Standard-IA/Deep Archive (Combined Storage Tiers), One Zone-IA/Deep Archive (Combined Storage Tiers), Intelligent-Tiering/Deep Archive (Combined Storage Tiers)]

### Optional

- `arnrole` (String) Needed for AWS STS assume role and AWS STS assume role with IAM role policy
- `credentials` (Block List) (see [below for nested schema](#nestedblock--credentials))
- `deduplicationdblocation` (Block Set) A list of dedupe locations can be provided for the storage pool being created. This provides an efficient way to save/store data by eliminating duplicate blocks of data during backups (see [below for nested schema](#nestedblock--deduplicationdblocation))
- `encryption` (Block List) Different ways in which data can be encrypted. (see [below for nested schema](#nestedblock--encryption))
- `security` (Block Set) (see [below for nested schema](#nestedblock--security))
- `usededuplication` (String) Enables or disables deduplication on the storage

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--mediaagent"></a>
### Nested Schema for `mediaagent`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--credentials"></a>
### Nested Schema for `credentials`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--deduplicationdblocation"></a>
### Nested Schema for `deduplicationdblocation`

Optional:

- `mediaagent` (Block List) (see [below for nested schema](#nestedblock--deduplicationdblocation--mediaagent))
- `path` (String)

<a id="nestedblock--deduplicationdblocation--mediaagent"></a>
### Nested Schema for `deduplicationdblocation.mediaagent`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.



<a id="nestedblock--encryption"></a>
### Nested Schema for `encryption`

Optional:

- `cipher` (String) The different types of encryption keys that can be used for encrypting the data. The values are case sensitive [BlowFish, AES, DES3, GOST, Serpent, Twofish]
- `encrypt` (String)
- `keylength` (Number) Different keylengths are present for different kinds of ciphers. Blowfish,Twofish,AES and Serpent all accept both 128 and 256. DES3 accepts only 192. GOST accepts only 256.
- `keyprovider` (Block List) (see [below for nested schema](#nestedblock--encryption--keyprovider))

<a id="nestedblock--encryption--keyprovider"></a>
### Nested Schema for `encryption.keyprovider`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.



<a id="nestedblock--security"></a>
### Nested Schema for `security`

Optional:

- `role` (Block List) (see [below for nested schema](#nestedblock--security--role))
- `user` (Block List) (see [below for nested schema](#nestedblock--security--user))
- `usergroup` (Block List) (see [below for nested schema](#nestedblock--security--usergroup))

<a id="nestedblock--security--role"></a>
### Nested Schema for `security.role`

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--security--user"></a>
### Nested Schema for `security.user`

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--security--usergroup"></a>
### Nested Schema for `security.usergroup`

Read-Only:

- `id` (Number) The ID of this resource.


