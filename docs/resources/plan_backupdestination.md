---
page_title: " Commvault : commvault_plan_backupdestination Resource "
subcategory: "Plans"
description: |-
  Use the commvault_plan_backupdestination resource type to create or delete backup destinations for plan in the CommCell environment.

---

# commvault_plan_backupdestination (Resource)

Use the commvault_plan_backupdestination resource type to create or delete backup destinations for plan in the CommCell environment.

## Example Usage

**Configure commvault plan backup destination with required fields**
```hcl
data "commvault_storagepool" "storagepool1" {
  name = "Test-Terraform-Pool"
}

resource "commvault_plan_backupdestination" "plan_backupdestination1" {
  name = "Primary-Test-BkpDst"
   storagepool {
    id = data.commvault_storagepool.storagepool1.id
   }
}
```

**Configure commvault plan backup destination with custom fields**
```hcl
data "commvault_storagepool" "storagepool1" {
  name = "Test-Terraform-Pool"
}

data "commvault_region" "region1" {
    name = "us-east-2"
}

resource "commvault_plan_backupdestination" "plan_backupdestination2" {
   name = "Primary-Test-BkpDst-custom"
   storagepool {
    id = data.commvault_storagepool.storagepool1.id
   }
   retentionperioddays       = 7
   enabledataaging = "true"
    useextendedretentionrules = "true"
    retentionruletype = "RETENTION_PERIOD"
    extendedretentionrules {
      firstextendedretentionrule {
        type                = "HALF_YEARLY_FULLS"
        retentionperioddays = 90
      }
    }
    overrideretentionsettings = "true"
   region {
      id = data.commvault_region.region1.id
    }
}
```

**Configure commvault plan backup destination with custom fields**
```hcl
data "commvault_storagepool" "storagepool2" {
  name = "Test-Terraform-Pool-2"
}

data "commvault_storagepool" "storagepool1" {
  name = "Test-Terraform-Pool"
}

data "commvault_region" "region1" {
    name = "us-east-2"
}

resource "commvault_plan_backupdestination" "plan_backupdestination2" {
   name = "Primary-Test-BkpDst-custom"
   storagepool {
    id = data.commvault_storagepool.storagepool1.id
   }
   retentionperioddays       = 7
   enabledataaging = "true"
    useextendedretentionrules = "true"
    retentionruletype = "RETENTION_PERIOD"
    extendedretentionrules {
      firstextendedretentionrule {
        type                = "HALF_YEARLY_FULLS"
        retentionperioddays = 90
      }
    }
    overrideretentionsettings = "true"
   region {
      id = data.commvault_region.region1.id
    }
}

resource "commvault_plan_backupdestination" "plan_backupdestination3" {
   name = "Secondary-Test-BkpDst-custom"
   storagepool {
    id = data.commvault_storagepool.storagepool2.id
   }
   backupstocopy = "All_JOBS"
   backupstarttime = -1
   sourcecopy {
    id = commvault_plan_backupdestination.plan_backupdestination2.id
   }
   region {
      id = data.commvault_region.region1.id
    }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `storagepool` (Block List, Min: 1) (see [below for nested schema](#nestedblock--storagepool))
- `name` (String) Name of backup destination

### Optional

- `backupstarttime` (Number) Backup start time in seconds. The time is provided in unix time format.
- `backupstocopy` (String) All_JOBS means SYNCHRONOUS copy type, others are applicable for SELECTIVE copy Type only. [All_JOBS, ALL_FULLS, HOURLY_FULLS, DAILY_FULLS, WEEKLY_FULLS, MONTHLY_FULLS, QUARTERLY_FULLS, HALF_YEARLY_FULLS, YEARLY_FULLS, ADVANCED]
- `enabledataaging` (String) Tells if this copy has data aging enabled
- `extendedretentionrules` (Block List) If you want to update, specify the whole object. Extended retention rules should be bigger than retention period. (see [below for nested schema](#nestedblock--extendedretentionrules))
- `fullbackuptypestocopy` (String) Which type of backup type should be copied for the given backup destination when backup type is not all jobs. Default is LAST while adding new backup destination. [FIRST, LAST]
- `ismirrorcopy` (String) Is this a mirror copy? Only considered when isSnapCopy is true.
- `issnapcopy` (String) Is this a snap copy? If isMirrorCopy is not set, then default is Vault/Replica.
- `mappings` (Block Set) (see [below for nested schema](#nestedblock--mappings))
- `netappcloudtarget` (String) Only for snap copy. Enabling this changes SVM Mapping  to NetApp cloud targets only.
- `optimizeforinstantclone` (String) Flag to specify if primary storage is copy data management enabled.
- `overrideretentionsettings` (String) Tells if this copy should use storage pool retention period days or the retention defined for this copy. Set as true to use retention defined on this copy.
- `region` (Block List) (see [below for nested schema](#nestedblock--region))
- `retentionperioddays` (Number) Retention period in days. -1 can be specified for infinite retention. If this and snapRecoveryPoints both are not specified, this takes  precedence.
- `retentionruletype` (String) Which type of retention rule should be used for the given backup destination [RETENTION_PERIOD, SNAP_RECOVERY_POINTS]
- `snaprecoverypoints` (Number) Number of snap recovery points for snap copy for retention. Can be specified instead of retention period in Days for snap copy.
- `sourcecopy` (Block List) (see [below for nested schema](#nestedblock--sourcecopy))
- `storagetype` (String) [ALL, DISK, CLOUD, HYPERSCALE, TAPE]
- `useextendedretentionrules` (String) Use extended retention rules

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--storagepool"></a>
### Nested Schema for `storagepool`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--extendedretentionrules"></a>
### Nested Schema for `extendedretentionrules`

Optional:

- `firstextendedretentionrule` (Block List) (see [below for nested schema](#nestedblock--extendedretentionrules--firstextendedretentionrule))
- `secondextendedretentionrule` (Block List) (see [below for nested schema](#nestedblock--extendedretentionrules--secondextendedretentionrule))
- `thirdextendedretentionrule` (Block List) (see [below for nested schema](#nestedblock--extendedretentionrules--thirdextendedretentionrule))

<a id="nestedblock--extendedretentionrules--firstextendedretentionrule"></a>
### Nested Schema for `extendedretentionrules.firstextendedretentionrule`

Optional:

- `isinfiniteretention` (String) If this is set as true, no need to specify retentionPeriodDays.
- `retentionperioddays` (Number) If this is set, no need to specify isInfiniteRetention as false.
- `type` (String) All_JOBS means SYNCHRONOUS copy type, others are applicable for SELECTIVE copy Type only. [All_JOBS, ALL_FULLS, HOURLY_FULLS, DAILY_FULLS, WEEKLY_FULLS, MONTHLY_FULLS, QUARTERLY_FULLS, HALF_YEARLY_FULLS, YEARLY_FULLS, ADVANCED]


<a id="nestedblock--extendedretentionrules--secondextendedretentionrule"></a>
### Nested Schema for `extendedretentionrules.secondextendedretentionrule`

Optional:

- `isinfiniteretention` (String) If this is set as true, no need to specify retentionPeriodDays.
- `retentionperioddays` (Number) If this is set, no need to specify isInfiniteRetention as false.
- `type` (String) All_JOBS means SYNCHRONOUS copy type, others are applicable for SELECTIVE copy Type only. [All_JOBS, ALL_FULLS, HOURLY_FULLS, DAILY_FULLS, WEEKLY_FULLS, MONTHLY_FULLS, QUARTERLY_FULLS, HALF_YEARLY_FULLS, YEARLY_FULLS, ADVANCED]


<a id="nestedblock--extendedretentionrules--thirdextendedretentionrule"></a>
### Nested Schema for `extendedretentionrules.thirdextendedretentionrule`

Optional:

- `isinfiniteretention` (String) If this is set as true, no need to specify retentionPeriodDays.
- `retentionperioddays` (Number) If this is set, no need to specify isInfiniteRetention as false.
- `type` (String) All_JOBS means SYNCHRONOUS copy type, others are applicable for SELECTIVE copy Type only. [All_JOBS, ALL_FULLS, HOURLY_FULLS, DAILY_FULLS, WEEKLY_FULLS, MONTHLY_FULLS, QUARTERLY_FULLS, HALF_YEARLY_FULLS, YEARLY_FULLS, ADVANCED]



<a id="nestedblock--mappings"></a>
### Nested Schema for `mappings`

Optional:

- `source` (Block List) (see [below for nested schema](#nestedblock--mappings--source))
- `sourcevendor` (Block List) (see [below for nested schema](#nestedblock--mappings--sourcevendor))
- `target` (Block List) (see [below for nested schema](#nestedblock--mappings--target))
- `targetvendor` (Block List) (see [below for nested schema](#nestedblock--mappings--targetvendor))
- `vendor` (String) Snapshot vendors available for Snap Copy mappings [NETAPP, AMAZON, PURE]

<a id="nestedblock--mappings--source"></a>
### Nested Schema for `mappings.source`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--mappings--sourcevendor"></a>
### Nested Schema for `mappings.sourcevendor`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--mappings--target"></a>
### Nested Schema for `mappings.target`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--mappings--targetvendor"></a>
### Nested Schema for `mappings.targetvendor`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.



<a id="nestedblock--region"></a>
### Nested Schema for `region`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--sourcecopy"></a>
### Nested Schema for `sourcecopy`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


