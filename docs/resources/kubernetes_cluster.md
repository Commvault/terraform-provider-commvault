---
page_title: " Commvault : commvault_kubernetes_cluster Resource"
subcategory: "Kubernetes"
description: |-
    Use the commvault_kubernetes_cluster resource type to create or delete kubernetes cluster in the CommCell environment.

---

# commvault_kubernetes_cluster (Resource)

Use the commvault_kubernetes_cluster resource type to create or delete kubernetes cluster in the CommCell environment.

## Example Usage

**Configure commvault kubernetes cluster with required fields**
```hcl
data "commvault_client" "access_node1" {
  name = "client1"
}

resource "commvault_kubernetes_cluster" "kubernetes_cluster1" {
  name           = "SP32-Terraform-Test-Kubernetes"
  apiserver      = "https://1.2.3.4:6443"
  serviceaccount = "cvadmin"
  servicetoken   = "##############"
  accessnodes {
    id   = data.commvault_client.access_node1.id
    type = 3
  }
}
```

**Configure commvault kubernetes cluster with custom fields**
```hcl
data "commvault_client" "access_node1" {
  name = "bdcsrvtest05"
}

data "commvault_plan" "plan1" {
  name = "AWS-Test-Plan"
}

data "commvault_region"   "region1" {
  name = "Australia"
}

resource "commvault_kubernetes_cluster" "kubernetes_cluster2" {
  name           = "SP32-Terraform-Test-Kubernetes-Custom-up"
  apiserver      = "https://1.2.3.4:6443"
  serviceaccount = "cvadmin"
  servicetoken   = "#########"
  accessnodes {
    id   = data.commvault_client.access_node1.id
    type = 3
  }
  accessnodes {
    id   = 3986
    type = 3
  }
  servicetype = "ONPREM"
  etcdprotection {
    plan {
      id = data.commvault_plan.plan1.id
    }
    enabled = "true"
  }
  activitycontrol {
    enablebackup             = "true"
    enablerestore            = "true"
  }
  region {
    id   = data.commvault_region.region1.id
  }
  tags {
    name  = "testK8s"
    value = "K8s"
  }
  tags {
    name  = "testK8s-2"
    value = "K8s-2"
  }
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required
- `name` (String) Name of the Kubernetes Cluster
- `apiserver` (String) API Server Endpoint of the cluster
- `serviceaccount` (String) Name of the Service Account to authenticate with the cluster
- `servicetoken` (String) Secret token to authenticate with the cluster
- `accessnodes` (Block Set) (see [below for nested schema](#nestedblock--accessnodes))

### Optional
- `activitycontrol` (Block List) Request definition changing activity control options for cluster (see [below for nested schema](#nestedblock--activitycontrol))
- `etcdprotection` (Block List) ETCD Protection options for a cluster (see [below for nested schema](#nestedblock--etcdprotection))
- `options` (Block List) Request definition for cluster advanced options (see [below for nested schema](#nestedblock--options))
- `region` (Block List) (see [below for nested schema](#nestedblock--region))
- `servicetype` (String) The Service Type of the Kubernetes cluster [ONPREM, AKS]
- `tags` (Block Set) Modify or add tags on the cluster (see [below for nested schema](#nestedblock--tags))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--accessnodes"></a>
### Nested Schema for `accessnodes`

Optional:

- `type` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--activitycontrol"></a>
### Nested Schema for `activitycontrol`

Optional:

- `enablebackup` (String) Enable or disable backup for cluster
- `enablebackupafteradelay` (Number) Enabling backup after a delay. Provide UTC Time in Unix format
- `enablerestore` (String) Enable or disable restore for cluster
- `enablerestoreafteradelay` (Number) Enabling restore after a delay. Provide UTC Time in Unix format


<a id="nestedblock--etcdprotection"></a>
### Nested Schema for `etcdprotection`

Optional:

- `enabled` (String) Denote if etcd protection is enabled
- `plan` (Block List) (see [below for nested schema](#nestedblock--etcdprotection--plan))

<a id="nestedblock--etcdprotection--plan"></a>
### Nested Schema for `etcdprotection.plan`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.



<a id="nestedblock--options"></a>
### Nested Schema for `options`

Optional:

- `imageregistry` (Block List) Request definition changing image registry options for cluster (see [below for nested schema](#nestedblock--options--imageregistry))

<a id="nestedblock--options--imageregistry"></a>
### Nested Schema for `options.imageregistry`

Optional:

- `imagepullsecret` (String) Specify image pull secret to authenticate with the image repository
- `registryurl` (String) Specify image registry URL for internal image repository



<a id="nestedblock--region"></a>
### Nested Schema for `region`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--tags"></a>
### Nested Schema for `tags`

Optional:

- `name` (String)
- `value` (String)


