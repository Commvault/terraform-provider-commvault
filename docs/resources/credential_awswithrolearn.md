---
page_title: " Commvault : commvault_credential_awswithrolearn Resource"
subcategory: "Credentials"
description: |-
  Use the commvault_credential_awswithrolearn resource type to create or delete an AWS Credential(STS Assume Role with IAM Role Policy) in the CommCell environment.
---

# commvault_credential_awswithrolearn (Resource)

Use the commvault_credential_awswithrolearn resource type to create or delete an AWS Credential(STS Assume Role with IAM Role Policy) in the CommCell environment.

## Example Usage

**Configure AWS credential role ARN with required fields**
```hcl
resource "commvault_credential_awswithrolearn" "credential_awswithrolearn" {
  name = "SP32-Terraform-Test-Credential-AWS-Role-ARN"
  rolearn = "AKQWERTPGVNQI3HO5QQ"
}
```
**Configure AWS credential role ARN with custom fields**
```hcl
data "commvault_user" "user1" {
  name = "AuditUser"
}

data "commvault_usergroup" "usergroup1" {
  name = "{Testing Issue}"
}

data "commvault_permission" "cv_permission" {
  name = "Agent Management"
}

resource "commvault_credential_awswithrolearn" "credential_awswithrolearn-cust" {
  name = "SP32-Terraform-Test-Credential-AWS-Role-ARN-custom"
  rolearn = "AKIA5KSJPDYKLEWO5QQ"
  description = "AWS credential- Role ARN created through Terraform"
  security {
    associations {
      iscreatorassociation = "false"
      permissions {
          permissionid = 218
        }
      user {         
          id = data.commvault_user.user1.id
        }
      }
    associations {
      iscreatorassociation = "false"
      permissions {
          permissionid = data.commvault_permission.cv_permission.id
        }
      usergroup {         
          id = data.commvault_usergroup.usergroup1.id
        }
      }
  }
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of Credential
- `rolearn` (String) Role ARN of credential

### Optional

- `description` (String) Description of Credential
- `password` (String) Role ARN of credential
- `security` (Block List) Security association of a list of users and user groups (see [below for nested schema](#nestedblock--security))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--security"></a>
### Nested Schema for `security`

Optional:

- `associations` (Block Set) (see [below for nested schema](#nestedblock--security--associations))
- `owner` (Block List) Owner of a credential can be a user or user group (see [below for nested schema](#nestedblock--security--owner))

<a id="nestedblock--security--associations"></a>
### Nested Schema for `security.associations`

Optional:

- `iscreatorassociation` (String) To check if the user/user group associated is the owner.
- `permissions` (Block List) List of permissions associated with the entity. Either categoryId and categoryName or permissionId and permissionName will be returned. If categoryId or categoryName is returned, all the corresponding permissions in the category are associated with the entity. (see [below for nested schema](#nestedblock--security--associations--permissions))
- `user` (Block List) (see [below for nested schema](#nestedblock--security--associations--user))
- `usergroup` (Block List) (see [below for nested schema](#nestedblock--security--associations--usergroup))

<a id="nestedblock--security--associations--permissions"></a>
### Nested Schema for `security.associations.permissions`

Optional:

- `categoryid` (Number)
- `categoryname` (String)
- `exclude` (String) Flag to specify if this is included permission or excluded permission.
- `permissionid` (Number)
- `permissionname` (String)
- `type` (String) Returns the type of association. [ALL_CATEGORIES, CATEGORY_ENTITY, PERMISSION_ENTITY]


<a id="nestedblock--security--associations--user"></a>
### Nested Schema for `security.associations.user`

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--security--associations--usergroup"></a>
### Nested Schema for `security.associations.usergroup`

Read-Only:

- `id` (Number) The ID of this resource.



<a id="nestedblock--security--owner"></a>
### Nested Schema for `security.owner`

Optional:

- `user` (Block List) (see [below for nested schema](#nestedblock--security--owner--user))
- `usergroup` (Block List) (see [below for nested schema](#nestedblock--security--owner--usergroup))

<a id="nestedblock--security--owner--user"></a>
### Nested Schema for `security.owner.user`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--security--owner--usergroup"></a>
### Nested Schema for `security.owner.usergroup`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


