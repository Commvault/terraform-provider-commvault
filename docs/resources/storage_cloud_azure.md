---
page_title: " Commvault : commvault_storage_cloud_azure Resource"
subcategory: "Storage"
description: |-
  Use the commvault_storage_cloud_azure resource type to create or delete Microsoft Azure storage in the CommCell environment.
---


# commvault_storage_cloud_azure (Resource)

Use the commvault_storage_cloud_azure resource type to create or delete Microsoft Azure storage in the CommCell environment.

## Example Usage

**Configure Microsoft Azure storage (Access Key and Account name) with required fields**
```hcl
data "commvault_client"  "media_agent2" {
  name = "MA1"
}

data "commvault_credential" "azurecred1" {
  name = "Test-Terraform-Azure"
}

resource "commvault_storage_cloud_azure"  "storage_cloud_azure-1" {
    name = "SP32-Test-Terraform-storage_cloud_Azure-Access&Secret"
    mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    authentication = "Access and secret keys"   
    credentials {
      id = data.commvault_credential.azurecred1.id
    }
    container = "avcontainer"
    storageclass = "Cool"    
}
```
**Configure Microsoft Azure storage (IAM AD application) with required fields**
```hcl
data "commvault_client"  "media_agent2" {
  name = "MA1"
}

data "commvault_credential" "azurecredIAM" {
  name = "Test-Terraform-Azure-IAM"
}

resource "commvault_storage_cloud_azure"  "storage_cloud_azure-2" {
    name = "SP32-Test-Terraform-storage_cloud_Azure-IAMAD"
    mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    authentication = "IAM AD application role assignment (Credential Manager)" 
    accountname = "devritudisklib"   //Only for IAM VM and IAM AD
    credentials {
      id = data.commvault_credential.azurecredIAM.id
    }
    container = "avcontainer"
    storageclass = "Hot"         
}
```
**Configure Microsoft Azure storage (IAM VM role) with required fields**
```hcl
data "commvault_client"  "media_agent2" {
  name = "bdcsrvtest05"
}

resource "commvault_storage_cloud_azure"  "storage_cloud_azure-3" {
    name = "SP32-Test-Terraform-storage_cloud_Azure-IAMVM"
    mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    authentication = "IAM VM role assignment"  
    accountname = "devritudisklib"   //Only for IAM VM and IAM AD
    container = "avcontainer"
    storageclass = "Hot"     
}
```
**Configure Microsoft Azure storage (Access Key and Account name) with custom fields**
```hcl
data "commvault_client"  "media_agent2" {
  name = "bdcsrvtest05"
}

data "commvault_credential" "azurecred1" {
  name = "Test-Terraform-Azure-Sheza"
}

data "commvault_role" "role1" {
  name = "Client Group Creator"
}

data "commvault_role" "role2" {
  name = "Alert Owner"
}

data "commvault_user" "user1" {
  name = "testui"
}

data "commvault_usergroup" "usergroup1" {
  name = "{Testing Issue}"
}

resource "commvault_storage_cloud_azure"  "storage_cloud_azure-c1" {
    name = "SP32-Test-Terraform_cloud_Azure-AccessSecret-Custom"
    mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    authentication = "Access and secret keys"   
    credentials {
      id = data.commvault_credential.azurecred1.id
    }
    container = "avcontainer"
    storageclass = "Cool"  
    usededuplication = "true"
    deduplicationdblocation {
      path = "E:\\Terraform-Azure-DDB"
      mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    }
    security {
      role {
        id = data.commvault_role.role1.id
      }
      usergroup {
        id = data.commvault_usergroup.usergroup1.id
      }
    }
    security {
      role {
        id = data.commvault_role.role2.id
      }
      user {
        id = data.commvault_user.user1.id
      }
    }
    encryption {
      cipher = "TwoFish"
      keylength = 256
      encrypt = "true"
      keyprovider {
        name = "Built-in"
        id = 1
      }
    }
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `authentication` (String) Authentication type for the cloud storage server. Only Access & Account Name and IAM AD require credentials. [Access and secret keys, IAM VM role assignment, IAM AD application role assignment (Credential Manager)]
- `container` (String) Name of container
- `mediaagent` (Block List, Min: 1) (see [below for nested schema](#nestedblock--mediaagent))
- `name` (String) Name of the cloud storage library
- `storageclass` (String) Appropriate storage class for your account [Container's default, Hot, Cool, Archive, Hot/Archive (Combined Storage Tiers), Cool/Archive (Combined Storage Tiers)]

### Optional

- `accountname` (String) Only for IAM VM and IAM AD
- `credentials` (Block List) (see [below for nested schema](#nestedblock--credentials))
- `deduplicationdblocation` (Block Set) A list of dedupe locations can be provided for the storage pool being created. This provides an efficient way to save/store data by eliminating duplicate blocks of data during backups (see [below for nested schema](#nestedblock--deduplicationdblocation))
- `encryption` (Block List) Different ways in which data can be encrypted. (see [below for nested schema](#nestedblock--encryption))
- `security` (Block Set) (see [below for nested schema](#nestedblock--security))
- `servicehost` (String) IP address or fully qualified domain name or URL for the cloud library based on cloud vendor
- `usededuplication` (String) Enables or disables deduplication on the storage

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--mediaagent"></a>
### Nested Schema for `mediaagent`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--credentials"></a>
### Nested Schema for `credentials`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--deduplicationdblocation"></a>
### Nested Schema for `deduplicationdblocation`

Optional:

- `mediaagent` (Block List) (see [below for nested schema](#nestedblock--deduplicationdblocation--mediaagent))
- `path` (String)

<a id="nestedblock--deduplicationdblocation--mediaagent"></a>
### Nested Schema for `deduplicationdblocation.mediaagent`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.



<a id="nestedblock--encryption"></a>
### Nested Schema for `encryption`

Optional:

- `cipher` (String) The different types of encryption keys that can be used for encrypting the data. The values are case sensitive [BlowFish, AES, DES3, GOST, Serpent, Twofish]
- `encrypt` (String)
- `keylength` (Number) Different keylengths are present for different kinds of ciphers. Blowfish,Twofish,AES and Serpent all accept both 128 and 256. DES3 accepts only 192. GOST accepts only 256.
- `keyprovider` (Block List) (see [below for nested schema](#nestedblock--encryption--keyprovider))

<a id="nestedblock--encryption--keyprovider"></a>
### Nested Schema for `encryption.keyprovider`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.



<a id="nestedblock--security"></a>
### Nested Schema for `security`

Optional:

- `role` (Block List) (see [below for nested schema](#nestedblock--security--role))
- `user` (Block List) (see [below for nested schema](#nestedblock--security--user))
- `usergroup` (Block List) (see [below for nested schema](#nestedblock--security--usergroup))

<a id="nestedblock--security--role"></a>
### Nested Schema for `security.role`

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--security--user"></a>
### Nested Schema for `security.user`

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--security--usergroup"></a>
### Nested Schema for `security.usergroup`

Read-Only:

- `id` (Number) The ID of this resource.


