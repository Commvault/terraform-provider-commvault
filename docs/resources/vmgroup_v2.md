# commvault_vmgroup_v2 (Resource)

Use the commvault_vmgroup_v2 resource type to create or delete a VM Group in the Commcell environment.

## Example Usage
**create a VM Group using required fields**
```hcl
resource "commvault_vmgroup_v2" "test-vmgroup" {
  name = "Test-VM-Group"
  hypervisor {
    id   = 3423
    name = "Test-Azure"
  }
  plan {
    id = 85089
  }
  content {
    rulegroups {
      matchrule = "ALL"
      rules {
        condition = "EQUALS"
        name      = "City"
        type      = "TAG_CATEGORY"
      }

      rules {
        condition = "EQUALS"
        name      = "On"
        type      = "VM_POWER_STATE"
      }

      rules {
        condition = "EQUALS"
        name      = "RestoredVMs"
        type      = "SERVER"
      }
    }
  }
}
```

**create a VM Group using custom settings**
```hcl
resource "commvault_vmgroup_v2" "test-vmgroup" {

  name = "Test-VM-Group-Terraform"
  hypervisor {
    id   = data.commvault_client.hypervisor1.id
    name = "Test Terraform Azure Hypervisor1"
  }
  plan {
    id = 18
  }
  content {
    rulegroups {
      matchrule = "ALL"
      rules {
        condition = "EQUALS"
        name      = "City"
        type      = "TAG_CATEGORY"
      }
    }
  }
  activitycontrol {
    enablebackup = "false"
  }
  settings {
    autodetectvmowner           = "false"
    vmbackuptype                = "APPLICATION_AWARE"
    jobstarttime                = 86400
    usechangedblocktrackingonvm = true
    noofreaders                 = 5
  }
  enablefileindexing = false
  snapshotmanagement {
    enablehardwaresnapshot = "false"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `content` (Block List, Min: 1) (see [below for nested schema](#nestedblock--content))
- `hypervisor` (Block List, Min: 1) (see [below for nested schema](#nestedblock--hypervisor))
- `name` (String) subclient name
- `plan` (Block List, Min: 1) (see [below for nested schema](#nestedblock--plan))

### Optional

- `accessnode` (Block Set) (see [below for nested schema](#nestedblock--accessnode))
- `activitycontrol` (Block List) (see [below for nested schema](#nestedblock--activitycontrol))
- `diskfilters` (Block List) (see [below for nested schema](#nestedblock--diskfilters))
- `enablefileindexing` (String) True if file indexing needs to be enabled
- `filters` (Block List) (see [below for nested schema](#nestedblock--filters))
- `settings` (Block List) (see [below for nested schema](#nestedblock--settings))
- `snapshotmanagement` (Block List) (see [below for nested schema](#nestedblock--snapshotmanagement))
- `timezone` (Block List) (see [below for nested schema](#nestedblock--timezone))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--content"></a>
### Nested Schema for `content`

Optional:

- `overwrite` (String) True if content in vmgroup has to be overwritten, by default it will append the content
- `rulegroups` (Block Set) (see [below for nested schema](#nestedblock--content--rulegroups))

<a id="nestedblock--content--rulegroups"></a>
### Nested Schema for `content.rulegroups`

Optional:

- `matchrule` (String) Enum which specifies the whether to match all rules or any of the rules [ALL, ANY]
- `rules` (Block Set) (see [below for nested schema](#nestedblock--content--rulegroups--rules))

<a id="nestedblock--content--rulegroups--rules"></a>
### Nested Schema for `content.rulegroups.rules`

Optional:

- `condition` (String) Operation type for VM rules/filters [CONTAINS, DOES_NOT_CONTAIN, DOES_NOT_EQUAL, ENDS_WITH, EQUALS, STARTS_WITH]
- `name` (String) name of the VM to be added as content
- `type` (String) [NONE, SERVER, RES_POOL, VAPP, DATACENTER, FOLDER, CLUSTER, DATASTORE, DATASTORE_CLUSTER, VM, VM_NAME, VM_GUEST_OS, VM_GUEST_HOST_NAME, CLUSTER_SHARED_VOLUMES, LOCAL_DISK, CLUSTER_DISK, UNPROTECTED_VMS, ROOT, FILE_SERVER, SMB_SHARE, TYPES_FOLDER, VM_FOLDER, SERVER_FOLDER, TEMPLATE_FOLDER, STORAGE_REPOSITORY_FOLDER, VAPPFOLDER, DATACENTER_FOLDER, CLUSTER_FOLDER, VM_POWER_STATE, VM_NOTES, VM_CUSTOM_ATTRIBUTE, NETWORK, USER, VM_TEMPLATE, TAG, TAG_CATEGORY, SUBCLIENT, CLIENT_GROUP, PROTECTION_DOMAIN, CONSISTENCY_GROUP, INSTANCE_SIZE, ORGANIZATION, IMAGES, STORAGE_POLICY, DATABASE, TABLE, PROJECT, SELECTOR, MANAGED_BY, REPLICATION_MODE, METADATATAG, CATALOG, VAPPTEMPLATE, VOLUME]




<a id="nestedblock--hypervisor"></a>
### Nested Schema for `hypervisor`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--plan"></a>
### Nested Schema for `plan`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--accessnode"></a>
### Nested Schema for `accessnode`

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--activitycontrol"></a>
### Nested Schema for `activitycontrol`

Optional:


- `enablebackup` (String) true if Backup is enabled






<a id="nestedblock--diskfilters"></a>
### Nested Schema for `diskfilters`

Optional:

- `overwrite` (String) True if content in vmgroup has to be overwritten, by default it will append the content
- `rules` (Block Set) (see [below for nested schema](#nestedblock--diskfilters--rules))

<a id="nestedblock--diskfilters--rules"></a>
### Nested Schema for `diskfilters.rules`

Optional:

- `condition` (String) Operation type for VM rules/filters [CONTAINS, DOES_NOT_CONTAIN, DOES_NOT_EQUAL, ENDS_WITH, EQUALS, STARTS_WITH]
- `filtertype` (String) [NONE, DISK_PATH, DISK_PATTERN, DISK_VIRTUAL_DEVICE_NODE, DISK_DATASTORE, DISK_LABEL, DISK_TYPE, DISK_ADDRESS, CONTAINER_PATTERN, DISK_TAG]
- `name` (String) The string to be filtered
- `overwrite` (String) True if disk filter in vmgroup has to be overwritten, by default it will append the content
- `value` (String) The value string to be filtered, in case of disk tag , value of tag to be filtered
- `vmguid` (String) VM Guid of the Virtual Machine whose disk has to be filtered . This is optional. if not given, all disks of name and type from all Vms added in content will be filtered
- `vmname` (String) VM Name of the Virtual Machine whose disk has to be filtered . This is optional. if not given, all disks of name and type from all Vms added in content will be filtered



<a id="nestedblock--filters"></a>
### Nested Schema for `filters`

Optional:

- `overwrite` (String) True if content in vmgroup has to be overwritten, by default it will append the content
- `rulegroups` (Block Set) (see [below for nested schema](#nestedblock--filters--rulegroups))

<a id="nestedblock--filters--rulegroups"></a>
### Nested Schema for `filters.rulegroups`

Optional:

- `matchrule` (String) Enum which specifies the whether to match all rules or any of the rules [ALL, ANY]
- `rules` (Block Set) (see [below for nested schema](#nestedblock--filters--rulegroups--rules))

<a id="nestedblock--filters--rulegroups--rules"></a>
### Nested Schema for `filters.rulegroups.rules`

Optional:

- `condition` (String) Operation type for VM rules/filters [CONTAINS, DOES_NOT_CONTAIN, DOES_NOT_EQUAL, ENDS_WITH, EQUALS, STARTS_WITH]
- `name` (String) name of the VM to be added as content
- `type` (String) [NONE, SERVER, RES_POOL, VAPP, DATACENTER, FOLDER, CLUSTER, DATASTORE, DATASTORE_CLUSTER, VM, VM_NAME, VM_GUEST_OS, VM_GUEST_HOST_NAME, CLUSTER_SHARED_VOLUMES, LOCAL_DISK, CLUSTER_DISK, UNPROTECTED_VMS, ROOT, FILE_SERVER, SMB_SHARE, TYPES_FOLDER, VM_FOLDER, SERVER_FOLDER, TEMPLATE_FOLDER, STORAGE_REPOSITORY_FOLDER, VAPPFOLDER, DATACENTER_FOLDER, CLUSTER_FOLDER, VM_POWER_STATE, VM_NOTES, VM_CUSTOM_ATTRIBUTE, NETWORK, USER, VM_TEMPLATE, TAG, TAG_CATEGORY, SUBCLIENT, CLIENT_GROUP, PROTECTION_DOMAIN, CONSISTENCY_GROUP, INSTANCE_SIZE, ORGANIZATION, IMAGES, STORAGE_POLICY, DATABASE, TABLE, PROJECT, SELECTOR, MANAGED_BY, REPLICATION_MODE, METADATATAG, CATALOG, VAPPTEMPLATE, VOLUME]



<a id="nestedblock--settings"></a>
### Nested Schema for `settings`

Optional:

- `usechangedblocktrackingonvm` (String) True if Changed Block Tracking is enabled
- `autodetectvmowner` (String) True if auto detect VM Owner enabled
- `noofreaders` (Number) Number of readers for backup
- `vmbackuptype` (String) [APPLICATION_AWARE, FILE_SYSTEM_AND_APPLICATION_CONSISTENT, CRASH_CONSISTENT, APP_BASED_BACKUP, INHERITED]
- `jobstarttime` (Number) Start Time for the VM Group Job

<a id="nestedblock--snapshotmanagement"></a>
### Nested Schema for `snapshotmanagement`

Optional:

- `enablehardwaresnapshot` (String) True if hardware snapshot is enabled



<a id="nestedblock--timezone"></a>
### Nested Schema for `timezone`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


