---
page_title: " Commvault : commvault_storage_container_azure Resource"
subcategory: "Storage"
description: |-
  Use the commvault_storage_container_azure resource type to create or delete Azure storage container in the CommCell environment.
---

# commvault_storage_container_azure (Resource)

Use the commvault_storage_container_azure resource type to create or delete Azure storage container in the CommCell environment.

## Example Usage

**Configure Azure storage container with required fields**
```hcl
data "commvault_client"  "media_agent2" {
  name = "MA1"
}

data "commvault_credential" "azurecred1" {
  name = "Test-Terraform-Azure"
}

resource "commvault_storage_cloud_azure"  "storage_cloud_azure-1" {
    name = "SP32-Test-Terraform-storage_cloud_Azure-Access&Secret"
    mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    authentication = "Access and secret keys"   
    credentials {
      id = data.commvault_credential.azurecred1.id
    }
    container = "avcontainer"
    storageclass = "Cool"    
}

resource "commvault_storage_container_azure" "storage_container_azure" {
  cloudstorageid =  commvault_storage_cloud_azure.storage_cloud_azure-1.id
  mediaagent {
        id = data.commvault_client.media_agent1.id
      }
  authentication = "Access and secret keys"
  credentials {
      id = data.commvault_credential.azurecred1.id
    }
  container = "avcontainer"
  storageclass = "Hot"
}
```

**Configure Azure storage container with custom fields**
```hcl
data "commvault_client"  "media_agent2" {
  name = "MA1"
}

data "commvault_credential" "azurecred1" {
  name = "Test-Terraform-Azure"
}

data "commvault_role" "role1" {
  name = "Client Group Creator"
}

data "commvault_role" "role2" {
  name = "Alert Owner"
}

data "commvault_user" "user1" {
  name = "testui"
}

data "commvault_usergroup" "usergroup1" {
  name = "{Testing Issue}"
}

resource "commvault_storage_cloud_azure"  "storage_cloud_azure-c1" {
    name = "SP32-Test-Terraform_cloud_Azure-AccessSecret-Custom"
    mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    authentication = "Access and secret keys"   
    credentials {
      id = data.commvault_credential.azurecred1.id
    }
    container = "avcontainer"
    storageclass = "Cool"  
    usededuplication = "true"
    deduplicationdblocation {
      path = "E:\\Terraform-Azure-DDB"
      mediaagent {
        id = data.commvault_client.media_agent2.id
      }
    }
    security {
      role {
        id = data.commvault_role.role1.id
      }
      usergroup {
        id = data.commvault_usergroup.usergroup1.id
      }
    }
    security {
      role {
        id = data.commvault_role.role2.id
      }
      user {
        id = data.commvault_user.user1.id
      }
    }
    encryption {
      cipher = "TwoFish"
      keylength = 256
      encrypt = "true"
      keyprovider {
        name = "Built-in"
        id = 1
      }
    }
}

resource "commvault_storage_container_azure" "storage_container_azure-c1" {
  cloudstorageid =  commvault_storage_cloud_azure.storage_cloud_azure-c1.id
  mediaagent {
        id = data.commvault_client.media_agent1.id
      }
  authentication = "Access and secret keys"
  credentials {
      id = data.commvault_credential.azurecred1.id
    }
  container = "avcontainer"
  storageclass = "Hot"
  proxyaddress = "test.abc.com"
  port = "2000"
  username = "test\\team_abc"
  password = "############"
  access = "READ"  
  enable = "true"
  configuration {
    enable = "true"
    disablebackuplocationforfuturebackups = "false"
    prepareforretirement = "false"
    storageacceleratorcredentials {
      id = data.commvault_credential.azurecred2.id
    }
  }
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `authentication` (String) Authentication type for the cloud storage server. Only Access & Account Name and IAM AD require credentials. [Access and secret keys, IAM VM role assignment, IAM AD application role assignment (Credential Manager)]
- `cloudstorageid` (Number)
- `container` (String) Name of container
- `credentials` (Block List, Min: 1) (see [below for nested schema](#nestedblock--credentials))
- `mediaagent` (Block List, Min: 1) (see [below for nested schema](#nestedblock--mediaagent))
- `storageclass` (String) Appropriate storage class for your account [Container's default, Hot, Cool, Archive, Hot/Archive (Combined Storage Tiers), Cool/Archive (Combined Storage Tiers)]

### Optional

- `access` (String) The access type for the access path can be either read (writing to path not allowed) or read and write (writing to path allowed). [READ_AND_WRITE, READ]
- `accountname` (String) Only for IAM VM and IAM AD
- `configuration` (Block List) (see [below for nested schema](#nestedblock--configuration))
- `enable` (String) Enable/Disable access of bucket to a media Agent
- `password` (String) Password for proxy configuration (Should be in Base64 format)
- `port` (Number) Port for proxy configuration
- `proxyaddress` (String) If the MediaAgent accesses the mount path using a proxy then proxy server address needs to be provided. If you want to remove proxy information, pass empty string in proxyAddress.
- `servicehost` (String) IP address or fully qualified domain name or URL for the cloud library based on cloud vendor
- `username` (String) Username for proxy configuration

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--credentials"></a>
### Nested Schema for `credentials`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--mediaagent"></a>
### Nested Schema for `mediaagent`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


<a id="nestedblock--configuration"></a>
### Nested Schema for `configuration`

Optional:

- `disablebackuplocationforfuturebackups` (String) When true, prevents new data writes to backup location by changing number of writers to zero
- `enable` (String) When true, means mount path is enabled
- `prepareforretirement` (String) When true, the deduplicated blocks in the mount path will not be referenced when there are multiple mount paths in the library.
- `storageacceleratorcredentials` (Block List) (see [below for nested schema](#nestedblock--configuration--storageacceleratorcredentials))

<a id="nestedblock--configuration--storageacceleratorcredentials"></a>
### Nested Schema for `configuration.storageacceleratorcredentials`

Optional:

- `name` (String)

Read-Only:

- `id` (Number) The ID of this resource.


